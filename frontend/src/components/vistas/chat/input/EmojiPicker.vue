<script setup>
import { ref } from 'vue'

const emit = defineEmits(['seleccionar', 'cerrar'])

// CategorÃ­as de emojis
const categorias = ref([
  {
    nombre: 'Caritas',
    emojis: ['ðŸ˜€', 'ðŸ˜ƒ', 'ðŸ˜„', 'ðŸ˜', 'ðŸ˜…', 'ðŸ˜‚', 'ðŸ¤£', 'ðŸ˜Š', 'ðŸ˜‡', 'ðŸ™‚', 'ðŸ˜‰', 'ðŸ˜Œ', 'ðŸ˜', 'ðŸ¥°', 'ðŸ˜˜', 'ðŸ˜—', 'ðŸ˜™', 'ðŸ˜š', 'ðŸ˜‹', 'ðŸ˜›', 'ðŸ˜œ', 'ðŸ¤ª', 'ðŸ˜', 'ðŸ¤‘', 'ðŸ¤—', 'ðŸ¤­', 'ðŸ¤«', 'ðŸ¤”', 'ðŸ¤', 'ðŸ¤¨', 'ðŸ˜', 'ðŸ˜‘', 'ðŸ˜¶', 'ðŸ˜', 'ðŸ˜’', 'ðŸ™„', 'ðŸ˜¬', 'ðŸ¤¥', 'ðŸ˜Œ', 'ðŸ˜”', 'ðŸ˜ª', 'ðŸ¤¤', 'ðŸ˜´', 'ðŸ˜·', 'ðŸ¤’', 'ðŸ¤•', 'ðŸ¤¢', 'ðŸ¤®', 'ðŸ¤§', 'ðŸ¥µ', 'ðŸ¥¶', 'ðŸ¥´', 'ðŸ˜µ', 'ðŸ¤¯', 'ðŸ¤ ', 'ðŸ¥³', 'ðŸ˜Ž', 'ðŸ¤“', 'ðŸ§']
  },
  {
    nombre: 'Gestos',
    emojis: ['ðŸ‘', 'ðŸ‘Ž', 'ðŸ‘Š', 'âœŠ', 'ðŸ¤›', 'ðŸ¤œ', 'ðŸ¤ž', 'âœŒï¸', 'ðŸ¤Ÿ', 'ðŸ¤˜', 'ðŸ‘Œ', 'ðŸ¤', 'ðŸ‘ˆ', 'ðŸ‘‰', 'ðŸ‘†', 'ðŸ‘‡', 'â˜ï¸', 'âœ‹', 'ðŸ¤š', 'ðŸ–ï¸', 'ðŸ––', 'ðŸ‘‹', 'ðŸ¤™', 'ðŸ’ª', 'ðŸ™', 'ðŸ‘', 'ðŸ¤', 'ðŸ™Œ', 'ðŸ‘', 'ðŸ’…', 'ðŸ¤³', 'ðŸ’‹', 'ðŸ‘„', 'ðŸ‘…', 'ðŸ‘‚', 'ðŸ‘ƒ', 'ðŸ‘€', 'ðŸ‘ï¸', 'ðŸ§ ', 'ðŸ’€', 'ðŸ‘»', 'ðŸ’©', 'ðŸ¤¡', 'ðŸ‘¹', 'ðŸ‘º', 'ðŸ‘½', 'ðŸ¤–', 'ðŸŽƒ', 'ðŸ˜º', 'ðŸ˜¸', 'ðŸ˜¹', 'ðŸ˜»', 'ðŸ˜¼', 'ðŸ˜½', 'ðŸ™€', 'ðŸ˜¿', 'ðŸ˜¾']
  },
  {
    nombre: 'Corazones',
    emojis: ['â¤ï¸', 'ðŸ§¡', 'ðŸ’›', 'ðŸ’š', 'ðŸ’™', 'ðŸ’œ', 'ðŸ–¤', 'ðŸ¤', 'ðŸ¤Ž', 'ðŸ’”', 'â£ï¸', 'ðŸ’•', 'ðŸ’ž', 'ðŸ’“', 'ðŸ’—', 'ðŸ’–', 'ðŸ’˜', 'ðŸ’', 'ðŸ’Ÿ', 'â™¥ï¸', 'ðŸ’Œ', 'ðŸ’', 'ðŸŒ¹', 'ðŸ¥€', 'ðŸŒ¸', 'ðŸŒ·', 'ðŸŒº', 'ðŸŒ»', 'ðŸŒ¼', 'ðŸ’®']
  },
  {
    nombre: 'Objetos',
    emojis: ['ðŸ“±', 'ðŸ’»', 'ðŸ–¥ï¸', 'ðŸ–¨ï¸', 'âŒ¨ï¸', 'ðŸ–±ï¸', 'ðŸ–²ï¸', 'ðŸ’½', 'ðŸ’¾', 'ðŸ’¿', 'ðŸ“€', 'ðŸ“¼', 'ðŸ“·', 'ðŸ“¸', 'ðŸ“¹', 'ðŸŽ¥', 'ðŸ“½ï¸', 'ðŸŽžï¸', 'ðŸ“ž', 'â˜Žï¸', 'ðŸ“Ÿ', 'ðŸ“ ', 'ðŸ“º', 'ðŸ“»', 'ðŸŽ™ï¸', 'ðŸŽšï¸', 'ðŸŽ›ï¸', 'â±ï¸', 'â²ï¸', 'â°', 'ðŸ•°ï¸', 'ðŸ“¡', 'ðŸ”‹', 'ðŸ”Œ', 'ðŸ’¡', 'ðŸ”¦', 'ðŸ•¯ï¸', 'ðŸ§¯', 'ðŸ›¢ï¸', 'ðŸ’¸', 'ðŸ’µ', 'ðŸ’´', 'ðŸ’¶', 'ðŸ’·', 'ðŸ’°', 'ðŸ’³', 'ðŸ’Ž', 'âš–ï¸', 'ðŸ”§', 'ðŸ”¨', 'âš’ï¸', 'ðŸ› ï¸', 'â›ï¸', 'ðŸ”©', 'âš™ï¸', 'ðŸ”—', 'ðŸ“Ž', 'ðŸ–‡ï¸', 'ðŸ“']
  },
  {
    nombre: 'SÃ­mbolos',
    emojis: ['âœ…', 'âŒ', 'â“', 'â—', 'â€¼ï¸', 'â‰ï¸', 'ðŸ’¯', 'ðŸ”´', 'ðŸŸ ', 'ðŸŸ¡', 'ðŸŸ¢', 'ðŸ”µ', 'ðŸŸ£', 'âš«', 'âšª', 'ðŸŸ¤', 'ðŸ”¶', 'ðŸ”·', 'ðŸ”¸', 'ðŸ”¹', 'ðŸ”º', 'ðŸ”»', 'ðŸ’ ', 'ðŸ”˜', 'ðŸ”³', 'ðŸ”²', 'ðŸ', 'ðŸš©', 'ðŸŽŒ', 'ðŸ´', 'â­', 'ðŸŒŸ', 'âœ¨', 'âš¡', 'ðŸ”¥', 'ðŸ’¥', 'â˜€ï¸', 'ðŸŒ™', 'â­•', 'âœ”ï¸', 'â˜‘ï¸', 'âœ–ï¸', 'âž•', 'âž–', 'âž—', 'âž¡ï¸', 'â¬…ï¸', 'â¬†ï¸', 'â¬‡ï¸', 'â†—ï¸', 'â†˜ï¸', 'â†™ï¸', 'â†–ï¸', 'â†•ï¸', 'â†”ï¸', 'ðŸ”„', 'ðŸ”ƒ', 'ðŸ”™', 'ðŸ”š']
  }
])

const categoriaActiva = ref(0)

const seleccionarEmoji = (emoji) => {
  emit('seleccionar', emoji)
}
</script>

<template>
  <div class="emoji-picker">
    <!-- Tabs de categorÃ­as -->
    <div class="picker-tabs">
      <button
        v-for="(cat, index) in categorias"
        :key="cat.nombre"
        class="tab-btn"
        :class="{ activa: categoriaActiva === index }"
        @click="categoriaActiva = index"
      >
        {{ cat.emojis[0] }}
      </button>
    </div>

    <!-- Grid de emojis -->
    <div class="picker-content">
      <div class="categoria-nombre">{{ categorias[categoriaActiva].nombre }}</div>
      <div class="emoji-grid">
        <button
          v-for="emoji in categorias[categoriaActiva].emojis"
          :key="emoji"
          class="emoji-btn"
          @click="seleccionarEmoji(emoji)"
        >
          {{ emoji }}
        </button>
      </div>
    </div>
  </div>
</template>

<style scoped>
.emoji-picker {
  position: absolute;
  bottom: 100%;
  right: 0;
  margin-bottom: 8px;
  width: 320px;
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
  z-index: 50;
  overflow: hidden;
}

/* Tabs */
.picker-tabs {
  display: flex;
  border-bottom: 1px solid var(--color-border);
  padding: 8px;
  gap: 4px;
}

.tab-btn {
  flex: 1;
  padding: 8px;
  border: none;
  background: transparent;
  border-radius: 8px;
  font-size: 1.25rem;
  cursor: pointer;
  transition: background 0.2s ease;
}

.tab-btn:hover {
  background: var(--color-muted);
}

.tab-btn.activa {
  background: var(--color-accent);
}

/* Content */
.picker-content {
  padding: 12px;
  max-height: 250px;
  overflow-y: auto;
}

.categoria-nombre {
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--color-muted-foreground);
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.emoji-grid {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 4px;
}

.emoji-btn {
  width: 100%;
  aspect-ratio: 1;
  border: none;
  background: transparent;
  border-radius: 8px;
  font-size: 1.5rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.emoji-btn:hover {
  background: var(--color-muted);
  transform: scale(1.15);
}

/* Scrollbar */
.picker-content::-webkit-scrollbar {
  width: 6px;
}

.picker-content::-webkit-scrollbar-track {
  background: transparent;
}

.picker-content::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 3px;
}

/* Mobile */
@media (max-width: 400px) {
  .emoji-picker {
    width: calc(100vw - 32px);
    left: 0;
    right: 0;
    margin-left: auto;
    margin-right: auto;
  }

  .emoji-grid {
    grid-template-columns: repeat(7, 1fr);
  }
}
</style>
